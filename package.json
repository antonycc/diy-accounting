{
  "name": "@antonycc/spreadsheets-diyaccounting-co-uk",
  "version": "1.0.0",
  "type": "module",
  "description": "Spreadsheets download site for spreadsheets.diyaccounting.co.uk",
  "private": true,
  "scripts": {
    "prestart": "node scripts/build-packages.cjs --years 2 && ln -sfn ../../../target/zips web/spreadsheets.diyaccounting.co.uk/public/zips",
    "start": "npx http-server web/spreadsheets.diyaccounting.co.uk/public -p 3000",
    "build": "./mvnw clean verify",
    "build:packages": "node scripts/build-packages.cjs",
    "build:sitemaps": "node scripts/build-sitemaps.cjs",
    "build:knowledge-base": "node scripts/generate-knowledge-base-toml.cjs",
    "build:redirects": "node scripts/build-spreadsheets-redirects.cjs",
    "cdk:synth": "cd cdk-spreadsheets && npx cdk synth --require-approval never --ci true --strict --validation && cd ..",
    "cdk:diff": "cd cdk-spreadsheets && npx cdk diff && cd ..",
    "formatting": "prettier --check . && ./mvnw spotless:check",
    "formatting-fix": "prettier --write . && ./mvnw spotless:apply",
    "formatting:js": "prettier --check .",
    "formatting:js-fix": "prettier --write .",
    "formatting:java": "./mvnw -DskipTests spotless:check",
    "formatting:java-fix": "./mvnw -DskipTests spotless:apply",
    "linting": "npm run lint:workflows",
    "lint:workflows": "./scripts/validate-workflows.sh",
    "test": "npx vitest --run web/unit-tests/*.test.js",
    "test:unit": "npx vitest --run web/unit-tests/*.test.js",
    "test:browser": "npx playwright test --project=browser-tests",
    "test:spreadsheetsBehaviour": "bash -c 'set -o pipefail; npx playwright test --project=spreadsheetsBehaviour 2>&1 | tee spreadsheetsBehaviour.log'",
    "test:spreadsheetsBehaviour-local": "SPREADSHEETS_BASE_URL=http://localhost:3000 npm run test:spreadsheetsBehaviour",
    "test:spreadsheetsBehaviour-ci": "SPREADSHEETS_BASE_URL=https://ci-spreadsheets.diyaccounting.co.uk npm run test:spreadsheetsBehaviour",
    "test:spreadsheetsBehaviour-prod": "SPREADSHEETS_BASE_URL=https://spreadsheets.diyaccounting.co.uk npm run test:spreadsheetsBehaviour",
    "accessibility:pa11y-ci": "npx pa11y-ci --config .pa11yci.ci.json",
    "accessibility:pa11y-prod": "npx pa11y-ci --config .pa11yci.prod.json",
    "accessibility:pa11y-ci-report": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility && npx pa11y-ci --config .pa11yci.ci.json 2>&1 > web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility/pa11y-report.txt || true",
    "accessibility:pa11y-prod-report": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility && npx pa11y-ci --config .pa11yci.prod.json 2>&1 > web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility/pa11y-report.txt || true",
    "accessibility:axe-ci": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility && npx axe https://ci-spreadsheets.diyaccounting.co.uk/ https://ci-spreadsheets.diyaccounting.co.uk/download.html --save web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility/axe-results.json || true",
    "accessibility:axe-prod": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility && npx axe https://spreadsheets.diyaccounting.co.uk/ https://spreadsheets.diyaccounting.co.uk/download.html --save web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility/axe-results.json || true",
    "accessibility:axe-wcag22-ci": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility && npx axe https://ci-spreadsheets.diyaccounting.co.uk/ https://ci-spreadsheets.diyaccounting.co.uk/download.html --tags wcag2a,wcag2aa,wcag21a,wcag21aa,wcag22aa --save web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility/axe-wcag22-results.json || true",
    "accessibility:axe-wcag22-prod": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility && npx axe https://spreadsheets.diyaccounting.co.uk/ https://spreadsheets.diyaccounting.co.uk/download.html --tags wcag2a,wcag2aa,wcag21a,wcag21aa,wcag22aa --save web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility/axe-wcag22-results.json || true",
    "accessibility:lighthouse-ci-report": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility && npx lighthouse https://ci-spreadsheets.diyaccounting.co.uk/ --output json --output-path web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility/lighthouse-results.json --chrome-flags='--headless --no-sandbox' || true",
    "accessibility:lighthouse-prod-report": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility && npx lighthouse https://spreadsheets.diyaccounting.co.uk/ --output json --output-path web/spreadsheets.diyaccounting.co.uk/public/tests/accessibility/lighthouse-results.json --chrome-flags='--headless --no-sandbox' || true",
    "accessibility:text-spacing-ci-report": "node scripts/text-spacing-test.js --url https://ci-spreadsheets.diyaccounting.co.uk",
    "accessibility:text-spacing-prod-report": "node scripts/text-spacing-test.js --url https://spreadsheets.diyaccounting.co.uk",
    "accessibility:ci-report": "npm run accessibility:pa11y-ci-report ; npm run accessibility:axe-ci ; npm run accessibility:axe-wcag22-ci ; npm run accessibility:lighthouse-ci-report ; npm run accessibility:text-spacing-ci-report",
    "accessibility:prod-report": "npm run accessibility:pa11y-prod-report ; npm run accessibility:axe-prod ; npm run accessibility:axe-wcag22-prod ; npm run accessibility:lighthouse-prod-report ; npm run accessibility:text-spacing-prod-report",
    "penetration:eslint": "npx eslint --config eslint.security.config.js .",
    "penetration:eslint-report": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/penetration && npx eslint --config eslint.security.config.js . 2>&1 > web/spreadsheets.diyaccounting.co.uk/public/tests/penetration/eslint-security.txt || true",
    "penetration:audit": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/penetration && npm audit --audit-level=moderate --omit=dev",
    "penetration:audit-report": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/penetration && npm audit --json --audit-level=moderate --omit=dev 2>&1 > web/spreadsheets.diyaccounting.co.uk/public/tests/penetration/npm-audit.json 2>&1 || true",
    "penetration:retire": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/penetration && npx retire --path .",
    "penetration:retire-report": "mkdir -p web/spreadsheets.diyaccounting.co.uk/public/tests/penetration && npx retire --path . --outputformat json --outputpath web/spreadsheets.diyaccounting.co.uk/public/tests/penetration/retire.json 2>&1 || true",
    "penetration:ci": "npm run penetration:eslint && npm run penetration:audit && npm run penetration:retire",
    "penetration:prod": "npm run penetration:eslint && npm run penetration:audit && npm run penetration:retire",
    "penetration:ci-report": "npm run penetration:eslint-report ; npm run penetration:audit-report ; npm run penetration:retire-report",
    "penetration:prod-report": "npm run penetration:eslint-report ; npm run penetration:audit-report ; npm run penetration:retire-report",
    "compliance:ci": "npm run accessibility:pa11y-ci && npm run penetration:ci",
    "compliance:prod": "npm run accessibility:pa11y-prod && npm run penetration:prod",
    "compliance:ci-report": "npm run accessibility:ci-report ; npm run penetration:ci-report",
    "compliance:prod-report": "npm run accessibility:prod-report ; npm run penetration:prod-report",
    "compliance:ci-report-md": "npm run compliance:ci-report && node scripts/generate-compliance-report.js --target https://ci-spreadsheets.diyaccounting.co.uk",
    "compliance:prod-report-md": "npm run compliance:prod-report && node scripts/generate-compliance-report.js --target https://spreadsheets.diyaccounting.co.uk",
    "seo:structured-data-ci": "npx sdtt --url https://ci-spreadsheets.diyaccounting.co.uk/ --presets Google SocialMedia",
    "seo:structured-data-prod": "npx sdtt --url https://spreadsheets.diyaccounting.co.uk/ --presets Google SocialMedia",
    "update-to-minor": "npx npm-check-updates --upgrade --enginesNode --target minor --verbose --install always",
    "update-to-latest": "npx npm-check-updates --upgrade --enginesNode --verbose --install always",
    "update:java": "./scripts/update-java.sh",
    "update:node": "npm run update-to-latest",
    "diagram:spreadsheets": "npm run cdk:synth && bash -c 'for f in cdk-spreadsheets.out/*.template.json; do npx @mhlabs/cfn-diagram draw.io -c -s -t \"$f\" -o \"cdk-spreadsheets-$(basename $f .template.json).drawio\"; done' && for f in cdk-spreadsheets-*.drawio; do node scripts/clean-drawio.cjs \"$f\"; done",
    "diagram:spreadsheets:svg": "npm run diagram:spreadsheets && bash -c 'for f in cdk-spreadsheets-*.drawio; do drawio --export --format svg --output \"${f%.drawio}.svg\" \"$f\"; done'",
    "resources:spreadsheets": "node scripts/generate-aws-resources.js --profile spreadsheets"
  },
  "devDependencies": {
    "@axe-core/cli": "^4.11.1",
    "@mhlabs/cfn-diagram": "^1.1.40",
    "@playwright/test": "^1.58.2",
    "aws-cdk": "^2.1106.1",
    "eslint": "^10.0.1",
    "eslint-plugin-security": "^4.0.0",
    "http-server": "^14.1.1",
    "lighthouse": "^12.6.1",
    "npm-check-updates": "^19.4.1",
    "pa11y": "^9.1.0",
    "pa11y-ci": "^1.2.0",
    "prettier": "^3.8.1",
    "retire": "^5.4.2",
    "structured-data-testing-tool": "^4.5.0",
    "vitest": "^4.0.18",
    "wait-on": "^9.0.4"
  },
  "dependencies": {
    "stripe": "^17.7.0"
  },
  "engines": {
    "node": ">=24.0.0"
  }
}
